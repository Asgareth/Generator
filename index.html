<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <title>*GENERATOR HASEŁ*</title>
    <h1 id="naglowek">*GENERATOR HASEŁ*</h1>

    <label for="dlugosc">Wpisz długość hasła (8-32 znaków):</label>
    <input type="number" id="dlugosc" value="" min="0" max="32">

    <br></br>

    <table>
        <tr>
            <td>Wybierz co powinno zawierać hasło:</td>
        </tr>
        <tr>
            <td>Duże litery</td>
            <td><input type="checkbox" name="elementy" id="duze" /></td>
        </tr>
        <tr>
            <td>Małe litery</td>
            <td><input type="checkbox" name="elementy" id="male" /></td>
        </tr>
        <tr>
            <td>Znaki specjalne</td>
            <td><input type="checkbox" name="elementy" id="specjalne" /></td>
        </tr>
        <tr>
            <td>Cyfry</td>
            <td><input type="checkbox" name="elementy" id="cyfry" /></td>
        </tr>
    </table>

    <button id="odznaczenie" onclick="odznacz()">Odznacz wszystkie</button>
    <button id="zaznaczenie" onclick="zaznacz()">Zaznacz wszystkie</button>

    <br></br>

    <button id="start" onclick="generuj()">Generuj hasło</button>

    <h2>Wygenerowane hasło:</h2>
    <p id="wynik"></p>

    <button id="kopiowanie" onclick="kopiuj()">Kopiuj hasło do schowka</button>

    <script type="text/javascript">
        function odznacz() {
            const duzeLitery = document.getElementById('duze');
            const maleLitery = document.getElementById('male');
            const znakiSpecjalne = document.getElementById('specjalne');
            const liczby = document.getElementById('cyfry');

            if (duzeLitery.checked == true) {
                duzeLitery.checked = false
            }
            if (maleLitery.checked == true) {
                maleLitery.checked = false
            }
            if (znakiSpecjalne.checked == true) {
                znakiSpecjalne.checked = false
            }
            if (liczby.checked == true) {
                liczby.checked = false
            }
        }

        function zaznacz() {
            const duzeLitery = document.getElementById('duze');
            const maleLitery = document.getElementById('male');
            const znakiSpecjalne = document.getElementById('specjalne');
            const liczby = document.getElementById('cyfry');

            if (duzeLitery.checked != true) {
                duzeLitery.checked = true
            }
            if (maleLitery.checked != true) {
                maleLitery.checked = true
            }
            if (znakiSpecjalne.checked != true) {
                znakiSpecjalne.checked = true
            }
            if (liczby.checked != true) {
                liczby.checked = true
            }
        }

        function generuj() {
            // referencja do elementu zwiazanego z dlugoscia hasla
            // .value - zwraca wartosc wpisana w polu tekstowym
            const dlugosc = document.getElementById('dlugosc').value;

            // referencje do poszczegolnych elementow z checkboxami 
            // .checked - zwraca stan zaznaczenia pola wyboru (true/false)
            const duzeLitery = document.getElementById('duze').checked;
            const maleLitery = document.getElementById('male').checked;
            const znakiSpecjalne = document.getElementById('specjalne').checked;
            const liczby = document.getElementById('cyfry').checked;

            // puste poczatkowe wartosci dla zbioru mozliwych znakow i generowanego hasla
            let mozliweZnaki = '';
            let haslo = '';

            // wprowadzamy rozne odpowiednie typy znakow
            if (duzeLitery) mozliweZnaki += 'ABCDEFGHIJKLMNOPRSTUVWXYZ';
            if (maleLitery) mozliweZnaki += 'abcdefghijklmnoprstuvwxyz';
            if (znakiSpecjalne) mozliweZnaki += '`!@#$%^&*()_-+=<>?,./';
            if (liczby) mozliweZnaki += '0123456789';

            // jesli nie zostanie zaznaczony zaden z checkboxow zostanie wyswietlony komunikat
            if (mozliweZnaki == '') {
                alert('Musisz wybrać przynajmniej jedną kategorię znaków');
                return;
            }

            // jesli nie zostanie wpisana dlugosc hasla zostanie wyswietlony komunikat
            if (dlugosc == '') {
                alert('Musisz wpisać długość hasła');
                return;
            }

            // tutaj juz nastepuje generowanie hasla
            for (let i = 0; i < dlugosc; i++) {
                if (dlugosc < 8) {
                    alert("Minimalna długość generowanego hasła to 8");
                    break;
                }
                else if (dlugosc > 32) {
                    alert("Maksymalna długość generowanego hasła to 32");
                    break;
                }
                const losuj = Math.floor(Math.random() * mozliweZnaki.length);
                haslo += mozliweZnaki[losuj];
            }

            // wyswietlenie wygenerowanego hasla
            document.getElementById('wynik').innerText = haslo;
        }

        function kopiuj() {
            const elementDoSkopiowania = document.getElementById('wynik').textContent;
            navigator.clipboard.writeText(elementDoSkopiowania).then(function () {
                alert('Tekst został skopiowany do schowka');
            });
        }
        
    </script>
</body>

</html>